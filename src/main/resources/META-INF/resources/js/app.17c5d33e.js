(function(t){function e(e){for(var a,i,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},n={app:0},o=[];function i(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"b82b380b"}[t]+".js"}function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(t){var e=[],r=n[t];if(0!==r)if(r)e.push(r[2]);else{var a=new Promise((function(e,a){r=n[t]=[e,a]}));e.push(r[2]=a);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=i(t);var l=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(d);var r=n[t];if(0!==r){if(r){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,r[1](l)}n[t]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var u=l;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("transition",[r("keep-alive",{attrs:{include:"Home"}},[r("router-view")],1)],1)],1)},o=[],i={name:"App"},s=i,c=r("2877"),l=r("6544"),d=r.n(l),u=r("7496"),p=Object(c["a"])(s,n,o,!1,null,null,null),f=p.exports;d()(p,{VApp:u["a"]});r("d3b7");var h=r("8c4f"),v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("CardList")],1)},m=[],g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-app-bar",{attrs:{app:"",dark:""}},[r("v-toolbar-title",[t._v(" Hint Cards "),r("span",{staticClass:"title-info"},[t._v(t._s(t.titleInfo()))])]),r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.logout()}}},[r("v-icon",[t._v("mdi-logout-variant")])],1),r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.playCards()}}},[r("v-icon",[t._v("mdi-play")])],1),r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.createCard()}}},[r("v-icon",[t._v("mdi-plus")])],1)],1),r("v-content",[r("v-card",{attrs:{flat:"",tile:""}},[r("v-container",[r("v-text-field",{attrs:{clearable:"",placeholder:"Searchâ€¦"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),r("v-list",t._l(t.searchedCards,(function(e){return r("v-list-item",{key:e.id,on:{click:function(r){return t.editCard(e)}}},[r("v-list-item-content",[r("v-list-item-title",{staticClass:"card-title"},[r("span",[t._v(t._s(e.hints[0]))]),r("span",[t._v(t._s(e.hints[1]))])]),r("v-progress-linear",{attrs:{height:"1",color:t.colorForCard(e),value:e.score}})],1)],1)})),1)],1)],1)],1)},b=[],C=(r("4de4"),r("c975"),r("ac1f"),r("841c"),r("b85c")),w=r("bc3a"),y=r.n(w),x=a["a"].config.devtools;console.log("Development mode?",x);var V={apiUrl:x?"http://localhost:8090/":""},_=new a["a"],T={update:"update",delete:"delete",nothing:"nothing"},F=(r("a15b"),r("d4ec")),k=r("bee2"),$=function(){function t(){Object(F["a"])(this,t)}return Object(k["a"])(t,null,[{key:"getCardRawContent",value:function(t){return t.hints.join(" ")+" "+t.notes+" "+t.score+" "+t.tags.join(" ")}},{key:"colorFromScore",value:function(t){return t<10?"red":t<20?"deep-orange":t<30?"orange":t<40?"amber":t<50?"yellow":t<60?"grey darken-3":t<70?"blue lighten-2":t<80?"blue":t<90?"teal":"green"}}]),t}(),j=r("a78e"),O=r.n(j),A={name:"CardList",created:function(){this.axiosInstance=this.createAxiosInstance(),this.retrieveCardsFromApi(),this.listenToCardUpdated(),this.listenToCardPlayed(),this.listenToUserLogged()},data:function(){return{search:null,cards:[]}},computed:{searchedCards:function(){var t=this.search?this.search.toLowerCase():"";return this.cards.filter((function(e){return e.rawContent.indexOf(t)>=0}))}},methods:{createAxiosInstance:function(){var t=O.a.get("jwt");return t?(console.log("Creating axios instance with JWT",t.substring(0,10)+"..."),y.a.create({baseURL:V.apiUrl,headers:{Authorization:"Bearer "+t}})):y.a.create({baseURL:V.apiUrl})},retrieveCardsFromApi:function(){var t=this;console.log("Loading cards from API"),this.axiosInstance.post("cards/getAll").then((function(e){return t.prepareCards(e.data)})).catch((function(e){return t.handleError(e)}))},listenToCardPlayed:function(){var t=this;_.$off("card-played"),_.$on("card-played",(function(e){console.log("Card played",e),console.log("Going to edit card"),setTimeout((function(){return t.editCard(e.card)}),50)}))},listenToUserLogged:function(){var t=this;_.$off("user-logged"),_.$on("user-logged",(function(e){console.log("User logged",e),t.axiosInstance=t.createAxiosInstance(),t.retrieveCardsFromApi()}))},logout:function(){O.a.remove("jwt"),location.reload()},listenToCardUpdated:function(){var t=this;_.$off("card-updated"),_.$on("card-updated",(function(e){console.log("Card updated",e),e.action===T.update?(console.log("Updating card",e.card.hints[0]),t.axiosInstance.post("cards/saveOrUpdate",e.card).then((function(){return t.retrieveCardsFromApi()})).catch((function(t){return console.error("API Error",t)}))):e.action===T.delete&&(console.log("Removing card",e.card.hints[0]),t.axiosInstance({method:"POST",headers:{"content-type":"text/plain"},data:e.card.id,url:"cards/deleteOne"}).then((function(){return t.retrieveCardsFromApi()})).catch((function(t){return console.error("API Error",t)})))}))},prepareCards:function(t){console.log("Preparing cards"),this.fillRawContent(t),this.cards=t},fillRawContent:function(t){var e,r=Object(C["a"])(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;a.rawContent=$.getCardRawContent(a).toLowerCase()}}catch(n){r.e(n)}finally{r.f()}},titleInfo:function(){return this.search?this.searchedCards.length+" of "+this.cards.length:this.cards.length},colorForCard:function(t){return $.colorFromScore(t.score)},createCard:function(){this.editCard(null)},playCards:function(){var t=Math.floor(Math.random()*this.searchedCards.length);console.log("Playing card "+t),this.playCard(this.searchedCards[t])},editCard:function(t){this.$router.push({name:"EditCard",params:{card:t}})},playCard:function(t){this.$router.push({name:"PlayCard",params:{card:t}})},handleError:function(t){console.error("API Error:",t),401===t.response.status&&this.$router.push({name:"Login"})}}},E=A,P=(r("f81f"),r("40dc")),I=r("8336"),L=r("b0af"),S=r("a523"),U=r("a75b"),D=r("132d"),R=r("8860"),B=r("da13"),M=r("5d23"),H=r("8e36"),J=r("2fa4"),q=r("8654"),z=r("2a7f"),G=Object(c["a"])(E,g,b,!1,null,"d9ee520c",null),N=G.exports;d()(G,{VAppBar:P["a"],VBtn:I["a"],VCard:L["a"],VContainer:S["a"],VContent:U["a"],VIcon:D["a"],VList:R["a"],VListItem:B["a"],VListItemContent:M["a"],VListItemTitle:M["b"],VProgressLinear:H["a"],VSpacer:J["a"],VTextField:q["a"],VToolbarTitle:z["a"]});var W={name:"Home",components:{CardList:N}},K=W,Q=Object(c["a"])(K,v,m,!1,null,null,null),X=Q.exports,Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-app-bar",{attrs:{app:"",dark:""}},[r("v-toolbar-title",[t._v(t._s(t.title))]),r("v-spacer"),t.isEditing?r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.deleteCard()}}},[r("v-icon",[t._v("mdi-delete")])],1):t._e()],1),r("v-content",[r("v-card",{attrs:{flat:"",tile:""}},[r("v-container",[r("v-textarea",{attrs:{label:"Hints","auto-grow":"",rows:"1"},model:{value:t.cardForm.hints,callback:function(e){t.$set(t.cardForm,"hints",e)},expression:"cardForm.hints"}}),r("v-textarea",{attrs:{label:"Notes","auto-grow":"",rows:"1"},model:{value:t.cardForm.notes,callback:function(e){t.$set(t.cardForm,"notes",e)},expression:"cardForm.notes"}}),r("v-slider",{attrs:{color:t.sliderColor,min:"0",max:"100"},model:{value:t.cardForm.score,callback:function(e){t.$set(t.cardForm,"score",e)},expression:"cardForm.score"}}),r("v-text-field",{attrs:{label:"Tags","auto-grow":"",rows:"1"},model:{value:t.cardForm.tags,callback:function(e){t.$set(t.cardForm,"tags",e)},expression:"cardForm.tags"}})],1)],1)],1)],1)},Z=[],tt=(r("d81d"),r("b0c0"),r("1276"),r("498a"),{props:{card:Object},data:function(){return{cardForm:null}},computed:{sliderColor:function(){return $.colorFromScore(this.cardForm.score)},isEditing:function(){return null!=this.card},title:function(){return this.isEditing?"Edit Card":"Create Card"}},created:function(){console.log("Editing card:",this.card),this.cardForm=this.cardToForm(this.card)},beforeRouteLeave:function(t,e,r){"EditCard"===e.name&&"Home"===t.name&&_.$emit("card-updated",this.buildCardUpdate()),r()},methods:{deleteCard:function(){_.$emit("card-updated",{action:T.delete,card:this.card}),this.$router.go(-1)},buildCardUpdate:function(){var t=this.formToCard(this.cardForm);return{action:this.decideAction(t),card:t}},decideAction:function(t){return 0===t.hints.length||this.card&&$.getCardRawContent(t)===$.getCardRawContent(this.card)?T.nothing:T.update},formToCard:function(t){return{id:t.id,hints:t.hints.split("\n").map((function(t){return t.trim()})).filter((function(t){return!!t})),notes:t.notes,score:t.score,tags:t.tags.trim().split(/[, ]+/).filter((function(t){return!!t}))}},cardToForm:function(t){return t?{id:t.id,hints:t.hints.join("\n"),score:t.score,notes:t.notes,tags:t.tags.join(" ")}:{id:null,hints:"",score:50,notes:"",tags:""}}}}),et=tt,rt=r("ba0d"),at=r("a844"),nt=Object(c["a"])(et,Y,Z,!1,null,null,null),ot=nt.exports;d()(nt,{VAppBar:P["a"],VBtn:I["a"],VCard:L["a"],VContainer:S["a"],VContent:U["a"],VIcon:D["a"],VSlider:rt["a"],VSpacer:J["a"],VTextField:q["a"],VTextarea:at["a"],VToolbarTitle:z["a"]});var it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-app-bar",{attrs:{app:"",dark:""}},[r("v-toolbar-title",[t._v("Play Card")]),r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.revealCard()}}},[r("v-icon",[t._v("mdi-eye")])],1)],1),r("v-content",[r("v-card",{attrs:{flat:"",tile:""}},[r("v-container",[t._v(" Hint: "+t._s(t.hint)+" ")])],1)],1)],1)},st=[],ct={props:{card:Object},data:function(){return{hint:""}},created:function(){console.log("Playing card:",this.card);var t=Math.floor(Math.random()*this.card.hints.length);this.hint=this.card.hints[t]},methods:{revealCard:function(){_.$emit("card-played",{card:this.card}),this.$router.go(-1)}}},lt=ct,dt=Object(c["a"])(lt,it,st,!1,null,null,null),ut=dt.exports;d()(dt,{VAppBar:P["a"],VBtn:I["a"],VCard:L["a"],VContainer:S["a"],VContent:U["a"],VIcon:D["a"],VSpacer:J["a"],VToolbarTitle:z["a"]});var pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-app-bar",{attrs:{app:"",dark:""}},[r("v-toolbar-title",[t._v("Login")]),r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.login()}}},[r("v-icon",[t._v("mdi-login-variant")])],1)],1),r("v-content",[r("v-card",{attrs:{flat:"",tile:""}},[r("v-container",[r("v-text-field",{attrs:{label:"email","auto-grow":"",rows:"1"},model:{value:t.loginData.email,callback:function(e){t.$set(t.loginData,"email",e)},expression:"loginData.email"}}),r("v-text-field",{attrs:{type:"password",label:"password","auto-grow":"",rows:"1"},model:{value:t.loginData.password,callback:function(e){t.$set(t.loginData,"password",e)},expression:"loginData.password"}}),r("v-text-field",{attrs:{type:"password",label:"repeat password to register","auto-grow":"",rows:"1"},model:{value:t.loginData.password2,callback:function(e){t.$set(t.loginData,"password2",e)},expression:"loginData.password2"}})],1)],1)],1)],1)},ft=[],ht={data:function(){return{loginData:{email:"",password:"",password2:""}}},created:function(){console.log("Login")},methods:{login:function(){var t=this;y.a.post(V.apiUrl+"/security/login",this.loginData).then((function(e){return t.goToCards(e.data)})).catch((function(e){return t.handleError(e)}))},goToCards:function(t){O.a.set("jwt",t.password,{sameSite:"strict"}),_.$emit("user-logged"),this.$router.go(-1)},handleError:function(t){console.error("API Error:",t)}}},vt=ht,mt=Object(c["a"])(vt,pt,ft,!1,null,null,null),gt=mt.exports;d()(mt,{VAppBar:P["a"],VBtn:I["a"],VCard:L["a"],VContainer:S["a"],VContent:U["a"],VIcon:D["a"],VSpacer:J["a"],VTextField:q["a"],VToolbarTitle:z["a"]}),a["a"].use(h["a"]);var bt=[{path:"/",name:"Home",component:X},{path:"/login",name:"Login",component:gt},{path:"/edit",name:"EditCard",component:ot,props:!0},{path:"/play",name:"PlayCard",component:ut,props:!0},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}}],Ct=new h["a"]({mode:"history",base:"/",routes:bt}),wt=Ct,yt=r("2f62");a["a"].use(yt["a"]);var xt=new yt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Vt=r("f309");a["a"].use(Vt["a"]);var _t=new Vt["a"]({theme:{dark:!0}});a["a"].config.productionTip=!1,new a["a"]({router:wt,store:xt,vuetify:_t,render:function(t){return t(f)}}).$mount("#app")},"61e1":function(t,e,r){},f81f:function(t,e,r){"use strict";var a=r("61e1"),n=r.n(a);n.a}});
//# sourceMappingURL=app.17c5d33e.js.map